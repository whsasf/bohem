	**********  Starting /home/whsasf/workspace/bohem/Automation/multiple-messages-simultaneously-for-in-and-out-domains-senders/Deliever-message-before-AutoReplyStopDate-when-only-it-set/mx-10288-10304  **********
Test started: Sun Nov 12 23:43:57 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 10:39:12 2017 from 10.6.105.35
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ rm: cannot remove 'imapfetch*.log': No such file or directory
rm: cannot remove 'send*.log': No such file or directory
########## 2 Accounts provision ...
7327094155629521022
7515929494894400457
8545155042459958775
8587344445977172503
8630650472303554633
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh root@10.49.58.118
Password: 
Last login: Sun Nov 12 10:39:22 2017 from 10.6.105.35
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1510501319
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 4 Configure user1 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 10:41:45 2017 from 10.6.105.35
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar22089@openwave.com reply data.txt none 1510503119
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########4 Congifuration successfully[0m
##########5 delieber 1 message from user1 to user2 ...
########## 6 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 10:42:18 2017 from 10.6.105.35
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171112 104227737-0500 mx-10-49-58-118 mta 26417 27464 139676428830464 Note;SmtpConnectionReceived(70/1) [10.6.105.35]:fromhost=10.6.105.35:fromport=44578:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000002.0
20171112 104228297-0500 mx-10-49-58-118 mta 26417 27465 139676411995904 Note;SmtpConnectionReceived(70/1) [10.6.105.35]:fromhost=10.6.105.35:fromport=44584:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000004.0
20171112 104228299-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;SmtpConnectionReceived(70/1) [10.6.105.35]:fromhost=10.6.105.35:fromport=44580:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000006.0
20171112 104228299-0500 mx-10-49-58-118 mta 26417 27467 139676411729664 Note;SmtpConnectionReceived(70/1) [10.6.105.35]:fromhost=10.6.105.35:fromport=44582:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000008.0
20171112 104230137-0500 mx-10-49-58-118 mta 26417 27464 139676428830464 Note;MsgTrace(65/26) received from internet:from=<ar15190@whsasf.com>:msgid=<20171112154229.AAA26417.mx-10-49-58-118.openwave.com@whsasf.com>:fromhost=[10.6.105.35]:fromport=44578:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000002.1:msgsize=440:time=2:sender=<ar15190@whsasf.com>:rcpts=<ar22089@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171112 104230137-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar22089@openwave.com:from=<ar15190@whsasf.com>:msgid=<20171112154229.AAA26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=547:fromhost=10.6.105.35:fromport=44578:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000002.1
20171112 104230185-0500 mx-10-49-58-118 mta 26417 27477 139676410664704 Note;MsgTrace(65/26) delivered:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar15190@whsasf.com>:msgid=<20171112154229.AAA26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=582:port=55014:fromhost=10.6.105.35:fromport=44578:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000002.1:docid=1794bdca-c7c0-11e7-95c0-88e008aad72f:node=mx-10-49-58-118:nodePort=55014
20171112 104230191-0500 mx-10-49-58-118 mta 26417 27477 139676410664704 Note;MsgTrace(65/26) autoreplied:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar15190@whsasf.com>:msgid=<20171112154229.AAA26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=547:port=55014:fromhost=10.6.105.35:fromport=44578:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000002.1:node=mx-10-49-58-118:nodePort=55014
20171112 104230213-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar15190@whsasf.com:from=<>:msgid=<20171112154230.AAE26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=462:sid=57FAE7E5-8E748501-00000002.1
20171112 104230273-0500 mx-10-49-58-118 mta 26417 27482 139676409865984 Note;MsgTrace(65/26) delivered:user=ar15190@whsasf.com:mbox=8630650472303554633:mss=mx-10-49-58-119:from=<>:msgid=<20171112154230.AAE26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=549:port=55014:sid=57FAE7E5-8E748501-00000002.1:docid=179cccfe-c7c0-11e7-a933-a2f81a45f26d:node=mx-10-49-58-119:nodePort=55014
20171112 104230437-0500 mx-10-49-58-118 mta 26417 27464 139676428830464 Note;SmtpConnectionClosed(70/2) [10.6.105.35]:3:1:195:fromhost=[10.6.105.35]:fromport=44578:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000002.1
20171112 104230447-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;MsgTrace(65/26) received from internet:from=<ar29691@whsasf.com>:msgid=<20171112154229.AAB26417.mx-10-49-58-118.openwave.com@whsasf.com>:fromhost=[10.6.105.35]:fromport=44580:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000006.1:msgsize=440:time=1:sender=<ar29691@whsasf.com>:rcpts=<ar22089@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171112 104230447-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar22089@openwave.com:from=<ar29691@whsasf.com>:msgid=<20171112154229.AAB26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=547:fromhost=10.6.105.35:fromport=44580:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000006.1
20171112 104230462-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar22089@openwave.com:from=<ar24087@openwave.com>:msgid=<20171112154229.AAC26417.mx-10-49-58-118.openwave.com@openwave.com>:size=555:fromhost=10.6.105.35:fromport=44584:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000004.1
20171112 104230463-0500 mx-10-49-58-118 mta 26417 27465 139676411995904 Note;MsgTrace(65/26) received from internet:from=<ar24087@openwave.com>:msgid=<20171112154229.AAC26417.mx-10-49-58-118.openwave.com@openwave.com>:fromhost=[10.6.105.35]:fromport=44584:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000004.1:msgsize=444:time=1:sender=<ar24087@openwave.com>:rcpts=<ar22089@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171112 104230467-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar22089@openwave.com:from=<ar21387@openwave.com>:msgid=<20171112154229.AAD26417.mx-10-49-58-118.openwave.com@openwave.com>:size=555:fromhost=10.6.105.35:fromport=44582:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000008.1
20171112 104230468-0500 mx-10-49-58-118 mta 26417 27467 139676411729664 Note;MsgTrace(65/26) received from internet:from=<ar21387@openwave.com>:msgid=<20171112154229.AAD26417.mx-10-49-58-118.openwave.com@openwave.com>:fromhost=[10.6.105.35]:fromport=44582:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000008.1:msgsize=444:time=1:sender=<ar21387@openwave.com>:rcpts=<ar22089@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171112 104230490-0500 mx-10-49-58-118 mta 26417 27479 139676410398464 Note;MsgTrace(65/26) delivered:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar29691@whsasf.com>:msgid=<20171112154229.AAB26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=582:port=55014:fromhost=10.6.105.35:fromport=44580:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000006.1:docid=17c4257e-c7c0-11e7-865c-a3ad85a83e89:node=mx-10-49-58-118:nodePort=55014
20171112 104230495-0500 mx-10-49-58-118 mta 26417 27479 139676410398464 Note;MsgTrace(65/26) autoreplied:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar29691@whsasf.com>:msgid=<20171112154229.AAB26417.mx-10-49-58-118.openwave.com@whsasf.com>:size=547:port=55014:fromhost=10.6.105.35:fromport=44580:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000006.1:node=mx-10-49-58-118:nodePort=55014
20171112 104230514-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar29691@whsasf.com:from=<>:msgid=<20171112154230.AAF26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=462:sid=57FAE7E5-8E748501-00000006.1
20171112 104230516-0500 mx-10-49-58-118 mta 26417 27477 139676410664704 Note;MsgTrace(65/26) delivered:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar24087@openwave.com>:msgid=<20171112154229.AAC26417.mx-10-49-58-118.openwave.com@openwave.com>:size=592:port=55014:fromhost=10.6.105.35:fromport=44584:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000004.1:docid=17c6868e-c7c0-11e7-98fe-63c62ebf5c16:node=mx-10-49-58-118:nodePort=55014
20171112 104230520-0500 mx-10-49-58-118 mta 26417 27477 139676410664704 Note;MsgTrace(65/26) autoreplied:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar24087@openwave.com>:msgid=<20171112154229.AAC26417.mx-10-49-58-118.openwave.com@openwave.com>:size=555:port=55014:fromhost=10.6.105.35:fromport=44584:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000004.1:node=mx-10-49-58-118:nodePort=55014
20171112 104230537-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar24087@openwave.com:from=<>:msgid=<20171112154230.AAG26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=466:sid=57FAE7E5-8E748501-00000004.1
20171112 104230548-0500 mx-10-49-58-118 mta 26417 27484 139676409599744 Note;MsgTrace(65/26) delivered:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar21387@openwave.com>:msgid=<20171112154229.AAD26417.mx-10-49-58-118.openwave.com@openwave.com>:size=592:port=55014:fromhost=10.6.105.35:fromport=44582:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000008.1:docid=17c74222-c7c0-11e7-88b2-6120a6d130b3:node=mx-10-49-58-118:nodePort=55014
20171112 104230551-0500 mx-10-49-58-118 mta 26417 27484 139676409599744 Note;MsgTrace(65/26) autoreplied:user=ar22089@openwave.com:mbox=7327094155629521022:mss=mx-10-49-58-118:from=<ar21387@openwave.com>:msgid=<20171112154229.AAD26417.mx-10-49-58-118.openwave.com@openwave.com>:size=555:port=55014:fromhost=10.6.105.35:fromport=44582:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-00000008.1:node=mx-10-49-58-118:nodePort=55014
20171112 104230577-0500 mx-10-49-58-118 mta 26417 27474 139676411463424 Note;MsgTrace(65/26) docid will be used for message-id:user=ar21387@openwave.com:from=<>:msgid=<20171112154230.AAH26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=466:sid=57FAE7E5-8E748501-00000008.1
20171112 104230612-0500 mx-10-49-58-118 mta 26417 27479 139676410398464 Note;MsgTrace(65/26) delivered:user=ar24087@openwave.com:mbox=8545155042459958775:mss=mx-10-49-58-118:from=<>:msgid=<20171112154230.AAG26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=544:port=55014:sid=57FAE7E5-8E748501-00000004.1:docid=17cf55de-c7c0-11e7-9fb2-4f0e66243ece:node=mx-10-49-58-118:nodePort=55014
20171112 104230614-0500 mx-10-49-58-118 mta 26417 27482 139676409865984 Note;MsgTrace(65/26) delivered:user=ar29691@whsasf.com:mbox=8587344445977172503:mss=mx-10-49-58-119:from=<>:msgid=<20171112154230.AAF26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=549:port=55014:sid=57FAE7E5-8E748501-00000006.1:docid=17cb5164-c7c0-11e7-91f2-c7b2e3e7687d:node=mx-10-49-58-119:nodePort=55014
20171112 104230642-0500 mx-10-49-58-118 mta 26417 27477 139676410664704 Note;MsgTrace(65/26) delivered:user=ar21387@openwave.com:mbox=7515929494894400457:mss=mx-10-49-58-118:from=<>:msgid=<20171112154230.AAH26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=544:port=55014:sid=57FAE7E5-8E748501-00000008.1:docid=17d40b1a-c7c0-11e7-b515-ccd0eb80bc79:node=mx-10-49-58-118:nodePort=55014
20171112 104231069-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;SmtpConnectionClosed(70/2) [10.6.105.35]:3:1:195:fromhost=[10.6.105.35]:fromport=44580:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000006.1
20171112 104231069-0500 mx-10-49-58-118 mta 26417 27465 139676411995904 Note;SmtpConnectionClosed(70/2) [10.6.105.35]:3:1:199:fromhost=[10.6.105.35]:fromport=44584:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000004.1
20171112 104231070-0500 mx-10-49-58-118 mta 26417 27467 139676411729664 Note;SmtpConnectionClosed(70/2) [10.6.105.35]:3:1:199:fromhost=[10.6.105.35]:fromport=44582:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-00000008.1
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########6 Autoreply messaeg delievered successfully!![0m
########## 5 check autoreplied message in inbox of user2,user3,user4,user5 ...
imapmail: host[10.49.58.118] port[20143] user[ar21387] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510501310] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {544}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar21387@openwave.com
From: "Auto-reply from ar22089@openwave.com" <ar22089@openwave.com>
In-Reply-To: <20171112154229.AAD26417.mx-10-49-58-118.openwave.com@openwave.com>
Precedence: bulk
Date: Sun, 12 Nov 2017 10:42:30 -0500
Message-ID: <20171112154230.AAH26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Reply,This is an autoreply message for internal senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
imapmail: host[10.49.58.118] port[20143] user[ar24087] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510501311] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {544}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar24087@openwave.com
From: "Auto-reply from ar22089@openwave.com" <ar22089@openwave.com>
In-Reply-To: <20171112154229.AAC26417.mx-10-49-58-118.openwave.com@openwave.com>
Precedence: bulk
Date: Sun, 12 Nov 2017 10:42:30 -0500
Message-ID: <20171112154230.AAG26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Reply,This is an autoreply message for internal senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
imapmail: host[10.49.58.118] port[20143] user[ar29691] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510501169] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {549}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar29691@whsasf.com
From: "Auto-reply from ar22089@openwave.com" <ar22089@openwave.com>
In-Reply-To: <20171112154229.AAB26417.mx-10-49-58-118.openwave.com@whsasf.com>
Precedence: bulk
Date: Sun, 12 Nov 2017 10:42:30 -0500
Message-ID: <20171112154230.AAF26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Reply,This is an external autoreply message for external senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
imapmail: host[10.49.58.118] port[20143] user[ar15190] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510501170] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {549}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar15190@whsasf.com
From: "Auto-reply from ar22089@openwave.com" <ar22089@openwave.com>
In-Reply-To: <20171112154229.AAA26417.mx-10-49-58-118.openwave.com@whsasf.com>
Precedence: bulk
Date: Sun, 12 Nov 2017 10:42:30 -0500
Message-ID: <20171112154230.AAE26417.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Reply,This is an external autoreply message for external senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
[31m##########7 Check autoreplied messaege failed!Please checl manually,Exiting now ...[0m
TESTFAILED: /home/whsasf/workspace/bohem/Automation/multiple-messages-simultaneously-for-in-and-out-domains-senders/Deliever-message-before-AutoReplyStopDate-when-only-it-set/mx-10288-10304: AutoReply in reply mode with message delievered before stop date for hybrid sender test failed! (72 sec.)
##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
FAILED: /home/whsasf/workspace/bohem/Automation/multiple-messages-simultaneously-for-in-and-out-domains-senders/Deliever-message-before-AutoReplyStopDate-when-only-it-set/mx-10288-10304 [20171112-234357] (86 sec.)
Test ended: Sun Nov 12 23:45:23 CST 2017

