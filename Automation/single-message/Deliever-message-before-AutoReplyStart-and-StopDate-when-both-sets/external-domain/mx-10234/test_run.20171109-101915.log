	**********  Starting /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/internal-domain/mx-10019  **********
Test started: Thu Nov  9 10:19:15 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov  8 21:10:46 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ rm: cannot remove 'imapfetch*.log': No such file or directory
########## 2 Accounts provision ...
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh root@10.49.58.118
Password: 
Last login: Wed Nov  8 21:10:13 2017 from bigchina
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1510193860
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 3 Configure user2 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov  8 21:17:33 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Vacation,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Vacation,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar28121@openwave.com vacation data.txt 1510193865 1510195660
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########3 Congifuration successfully[0m
##########4 delieber 1 message from user1 to user2 ...
[32m########## 4 Message Deliver successfully, we can continue now[0m
########## 5 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov  8 21:18:12 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat /opt/imail2/log/mta.log
20171108 211821177-0500 mx-10-49-58-118 mta 9117 28377 140550248023808 Note;SmtpConnectionReceived(70/1) [10.37.2.214]:fromhost=10.37.2.214:fromport=40046:localAddr=10.49.58.118:sid=BF048E20-CA484956-00000618.0
20171108 211822949-0500 mx-10-49-58-118 mta 9117 28377 140550248023808 Note;MsgTrace(65/26) received from internet:from=<ar21020>:msgid=<20171109021822.BKY9117.mx-10-49-58-118.openwave.com@ar21020>:fromhost=[10.37.2.214]:fromport=40046:localAddr=10.49.58.118:sid=BF048E20-CA484956-00000618.1:msgsize=421:time=1:sender=<ar21020>:rcpts=<ar28121@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171108 211822949-0500 mx-10-49-58-118 mta 9117 11089 140550252283648 Note;MsgTrace(65/26) docid will be used for message-id:user=ar28121@openwave.com:from=<ar21020@openwave.com>:msgid=<20171109021822.BKY9117.mx-10-49-58-118.openwave.com@ar21020>:size=526:fromhost=10.37.2.214:fromport=40046:localAddr=[10.49.58.118]:sid=BF048E20-CA484956-00000618.1
20171108 211822987-0500 mx-10-49-58-118 mta 9117 2512 140550247225088 Note;MsgTrace(65/26) delivered:user=ar28121@openwave.com:mbox=5451560188283308199:mss=mx-10-49-58-118:from=<ar21020@openwave.com>:msgid=<20171109021822.BKY9117.mx-10-49-58-118.openwave.com@ar21020>:size=563:port=55014:fromhost=10.37.2.214:fromport=40046:localAddr=[10.49.58.118]:sid=BF048E20-CA484956-00000618.1:docid=42c6f78e-c4f4-11e7-8310-131251ccb15d:node=mx-10-49-58-118:nodePort=55014
20171108 211822993-0500 mx-10-49-58-118 mta 9117 2512 140550247225088 Note;MsgTrace(65/26) autoreplied:user=ar28121@openwave.com:mbox=5451560188283308199:mss=mx-10-49-58-118:from=<ar21020@openwave.com>:msgid=<20171109021822.BKY9117.mx-10-49-58-118.openwave.com@ar21020>:size=526:port=55014:fromhost=10.37.2.214:fromport=40046:localAddr=[10.49.58.118]:sid=BF048E20-CA484956-00000618.1:node=mx-10-49-58-118:nodePort=55014
20171108 211823007-0500 mx-10-49-58-118 mta 9117 14388 140550248556288 Note;MsgTrace(65/26) docid will be used for message-id:user=ar21020@openwave.com:from=<>:msgid=<20171109021822.BKZ9117.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=458:sid=BF048E20-CA484956-00000618.1
20171108 211823058-0500 mx-10-49-58-118 mta 9117 20581 140550248290048 Note;MsgTrace(65/26) delivered:user=ar21020@openwave.com:mbox=4860921797873517399:mss=mx-10-49-58-119:from=<>:msgid=<20171109021822.BKZ9117.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=539:port=55014:sid=BF048E20-CA484956-00000618.1:docid=42cdb1fa-c4f4-11e7-b360-b18a71b35999:node=mx-10-49-58-119:nodePort=55014
20171108 211823230-0500 mx-10-49-58-118 mta 9117 28377 140550248023808 Note;SmtpConnectionClosed(70/2) [10.37.2.214]:2:1:158:fromhost=[10.37.2.214]:fromport=40046:localAddr=10.49.58.118:sid=BF048E20-CA484956-00000618.1
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########5 Autoreply messaeg delievered successfully!![0m
########## 5 check autoreplied message in inbox of user1 ...
imapmail: host[10.49.58.118] port[20143] user[ar21020] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510193717] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {539}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar21020@openwave.com
From: "Auto-reply from ar28121@openwave.com" <ar28121@openwave.com>
In-Reply-To: <20171109021822.BKY9117.mx-10-49-58-118.openwave.com@ar21020>
Precedence: bulk
Date: Wed, 8 Nov 2017 21:18:22 -0500
Message-ID: <20171109021822.BKZ9117.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Vacation,This is an autoreply message for internal senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
[32m##########6 Check autoreplied messaege successfully!![0m
TESTPASSED: /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/internal-domain/mx-10019: AutoReply in vacation mode with message delievered between start/stop date for internal sender test success! (92 sec.)
##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
PASSED: /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/internal-domain/mx-10019 [20171109-101915] (95 sec.)
Test ended: Thu Nov  9 10:20:50 CST 2017

