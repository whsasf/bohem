	**********  Starting /home/whsasf/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10267  **********
Test started: Wed Nov 22 20:33:30 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 05:59:22 2017 from 10.6.104.117
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
rm: cannot remove 'imapfetch*.log': No such file or directory
rm: cannot remove 'send*.log': No such file or directory
########## 2 Accounts provision ...
5674230584850362058
6938251507801107526
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh root@10.49.58.118
Last login: Wed Nov 22 06:43:44 2017 from 10.6.104.117
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1511353911
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 4 Configure user2 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 07:30:59 2017 from 10.6.104.117
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Echo,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Echo,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar27478@openwave.com echo data.txt 1511353916 1511355711
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########4 Congifuration successfully[0m
##########5 delieber 1 message from user1 to user2 ...
[32m########## 5 Message Deliver successfully, we can continue now[0m
########## 6 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 07:32:07 2017 from 10.6.104.117
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171122 073213825-0500 mx-10-49-58-118 mta 29687 1468 140466350036736 Note;SmtpConnectionReceived(70/1) [10.6.104.117]:fromhost=10.6.104.117:fromport=34470:localAddr=10.49.58.118:sid=C15513F1-2BBE1D28-00000008.0
20171122 073216099-0500 mx-10-49-58-118 mta 29687 1474 140466333202176 Note;MsgTrace(65/26) docid will be used for message-id:user=ar27478@openwave.com:from=<ar7871@whsasf.com>:msgid=<20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:fromhost=10.6.104.117:fromport=34470:localAddr=[10.49.58.118]:sid=C15513F1-2BBE1D28-00000008.1
20171122 073216099-0500 mx-10-49-58-118 mta 29687 1468 140466350036736 Note;MsgTrace(65/26) received from internet:from=<ar7871@whsasf.com>:msgid=<20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>:fromhost=[10.6.104.117]:fromport=34470:localAddr=10.49.58.118:sid=C15513F1-2BBE1D28-00000008.1:msgsize=440:time=2:sender=<ar7871@whsasf.com>:rcpts=<ar27478@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171122 073216151-0500 mx-10-49-58-118 mta 29687 1479 140466332403456 Note;MsgTrace(65/26) delivered:user=ar27478@openwave.com:mbox=6938251507801107526:mss=mx-10-49-58-119:from=<ar7871@whsasf.com>:msgid=<20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:port=55014:fromhost=10.6.104.117:fromport=34470:localAddr=[10.49.58.118]:sid=C15513F1-2BBE1D28-00000008.1:docid=2c68921c-cf81-11e7-a241-d583b8f87668:node=mx-10-49-58-119:nodePort=55014
20171122 073216174-0500 mx-10-49-58-118 mta 29687 1477 140466332669696 Note;MsgTrace(65/26) autoreplied:user=ar27478@openwave.com:mbox=6938251507801107526:mss=mx-10-49-58-118:from=<ar7871@whsasf.com>:msgid=<20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:port=55014:fromhost=10.6.104.117:fromport=34470:localAddr=[10.49.58.118]:sid=C15513F1-2BBE1D28-00000008.1:node=mx-10-49-58-118:nodePort=55014
20171122 073216190-0500 mx-10-49-58-118 mta 29687 1474 140466333202176 Note;MsgTrace(65/26) docid will be used for message-id:user=ar7871@whsasf.com:from=<>:msgid=<20171122123216.AAH29687.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=487:sid=C15513F1-2BBE1D28-00000008.1
20171122 073216248-0500 mx-10-49-58-118 mta 29687 1479 140466332403456 Note;MsgTrace(65/26) delivered:user=ar7871@whsasf.com:mbox=5674230584850362058:mss=mx-10-49-58-119:from=<>:msgid=<20171122123216.AAH29687.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=1417:port=55014:fromhost=10.6.104.117:fromport=34470:localAddr=[10.49.58.118]:sid=C15513F1-2BBE1D28-00000008.1:docid=2c7410d8-cf81-11e7-96eb-7ff0563ed869:node=mx-10-49-58-119:nodePort=55014
20171122 073216460-0500 mx-10-49-58-118 mta 29687 1468 140466350036736 Note;SmtpConnectionClosed(70/2) [10.6.104.117]:3:1:193:fromhost=[10.6.104.117]:fromport=34470:localAddr=10.49.58.118:sid=C15513F1-2BBE1D28-00000008.1
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########6 Autoreply messaeg delievered successfully!![0m
########## 7 check autoreplied message in inbox of user1 ...
imapmail: host[10.49.58.118] port[20143] user[ar7871] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1511353861] UIDs valid
* OK [UIDNEXT 1001] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 3 FETCH (BODY[] {1417}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar7871@whsasf.com
From: "Auto-reply from ar27478@openwave.com" <ar27478@openwave.com>
In-Reply-To: <20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>
Precedence: bulk
Date: Wed, 22 Nov 2017 07:32:16 -0500
Message-ID: <20171122123216.AAH29687.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: multipart/mixed;
		Boundary="===========================_ _= 4277857(29687)1511353936"


--===========================_ _= 4277857(29687)1511353936
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit


Echo,This is an external autoreply message for external senders!

--===========================_ _= 4277857(29687)1511353936
Content-Type: message/rfc822

Received: from whsasf.com ([10.6.104.117]) by mx-10-49-58-118.openwave.com
          (InterMail vM.9.05.01.00 201-2473-137-123) with ESMTP
          id <20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>
          for <ar27478@openwave.com>; Wed, 22 Nov 2017 07:32:15 -0500
Subject: test message about autoreply feature
To: ar27478@openwave.com
Date: Wed, 22 Nov 2017 07:32:16 -0500
Message-Id: <20171122123215.AAG29687.mx-10-49-58-118.openwave.com@whsasf.com>
From: <ar7871@whsasf.com>

Echo,This ia a wonderful world!!

--===========================_ _= 4277857(29687)1511353936--

 FLAGS (\Recent \Seen))
* 3 EXISTS
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
[32m##########7 Check autoreplied messaege successfully!![0m
TESTPASSED: /home/whsasf/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10267: AutoReply in echo mode with message delievered between start/stop date for external sender test success! (114 sec.)
##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
PASSED: /home/whsasf/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10267 [20171122-203330] (118 sec.)
Test ended: Wed Nov 22 20:35:28 CST 2017

