	**********  Starting /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10235/  **********
Test started: Thu Nov 16 13:12:41 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Thu Nov 16 00:10:07 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ rm: cannot remove 'expect*.log': No such file or directory
rm: cannot remove 'imapfetch*.log': No such file or directory
rm: cannot remove 'send*.log': No such file or directory
########## 2 Accounts provision ...
6345550214836488168
8023775972459741015
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh root@10.49.58.118
Last login: Thu Nov 16 00:08:48 2017 from bigchina
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1510809091
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 4 Configure user2 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Thu Nov 16 00:10:37 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Vacation,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Vacation,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar247@openwave.com vacation data.txt 1510809096 1510810891
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########4 Congifuration successfully[0m
##########5 delieber 1 message from user1 to user2 ...
[32m########## 5 Message Deliver successfully, we can continue now[0m
########## 6 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Thu Nov 16 00:11:46 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171116 001150363-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;SmtpConnectionReceived(70/1) [10.37.2.214]:fromhost=10.37.2.214:fromport=59322:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001C.0
20171116 001152114-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;MsgTrace(65/26) received from internet:from=<ar28884@whsasf.com>:msgid=<20171116051151.AAX10719.mx-10-49-58-118.openwave.com@whsasf.com>:fromhost=[10.37.2.214]:fromport=59322:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001C.1:msgsize=439:time=2:sender=<ar28884@whsasf.com>:rcpts=<ar247@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171116 001152115-0500 mx-10-49-58-118 mta 10719 11340 139831883622144 Note;MsgTrace(65/26) docid will be used for message-id:user=ar247@openwave.com:from=<ar28884@whsasf.com>:msgid=<20171116051151.AAX10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:fromhost=10.37.2.214:fromport=59322:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001C.1
20171116 001152157-0500 mx-10-49-58-118 mta 10719 11345 139831882823424 Note;MsgTrace(65/26) delivered:user=ar247@openwave.com:mbox=8023775972459741015:mss=mx-10-49-58-118:from=<ar28884@whsasf.com>:msgid=<20171116051151.AAX10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=581:port=55014:fromhost=10.37.2.214:fromport=59322:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001C.1:docid=a803aeec-ca8c-11e7-b34f-8ab59eac9fea:node=mx-10-49-58-118:nodePort=55014
20171116 001152163-0500 mx-10-49-58-118 mta 10719 11345 139831882823424 Note;MsgTrace(65/26) autoreplied:user=ar247@openwave.com:mbox=8023775972459741015:mss=mx-10-49-58-118:from=<ar28884@whsasf.com>:msgid=<20171116051151.AAX10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:port=55014:fromhost=10.37.2.214:fromport=59322:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001C.1:node=mx-10-49-58-118:nodePort=55014
20171116 001152179-0500 mx-10-49-58-118 mta 10719 11340 139831883622144 Note;MsgTrace(65/26) docid will be used for message-id:user=ar28884@whsasf.com:from=<>:msgid=<20171116051152.AAY10719.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=458:sid=7DCB3FF7-A957BDFE-0000001C.1
20171116 001152227-0500 mx-10-49-58-118 mta 10719 11348 139831882290944 Note;MsgTrace(65/26) delivered:user=ar28884@whsasf.com:mbox=6345550214836488168:mss=mx-10-49-58-119:from=<>:msgid=<20171116051152.AAY10719.mx-10-49-58-118.openwave.com@mx-10-49-58-118>:size=548:port=55014:sid=7DCB3FF7-A957BDFE-0000001C.1:docid=a80b4800-ca8c-11e7-88b7-ef787ddf2365:node=mx-10-49-58-119:nodePort=55014
20171116 001152392-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;SmtpConnectionClosed(70/2) [10.37.2.214]:2:1:194:fromhost=[10.37.2.214]:fromport=59322:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001C.1
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########6 Autoreply messaeg delievered successfully!![0m
########## 7 check autoreplied message in inbox of user1 ...
imapmail: host[10.49.58.118] port[20143] user[ar28884] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 2 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510808891] UIDs valid
* OK [UIDNEXT 1002] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 1 RECENT
xx OK [READ-WRITE] SELECT completed
* 2 FETCH (BODY[] {548}
Return-Path: <>
Subject: Re: test message about autoreply feature
To: ar28884@whsasf.com
From: "Auto-reply from ar247@openwave.com" <ar247@openwave.com>
In-Reply-To: <20171116051151.AAX10719.mx-10-49-58-118.openwave.com@whsasf.com>
Precedence: bulk
Date: Thu, 16 Nov 2017 00:11:52 -0500
Message-ID: <20171116051152.AAY10719.mx-10-49-58-118.openwave.com@mx-10-49-58-118>
MIME-Version: 1.0
Content-Type: text/plain;
		charset=UTF-8
Content-Transfer-Encoding: 7bit


Vacation,This is an external autoreply message for external senders!
 FLAGS (\Recent \Seen))
xx OK FETCH completed
* BYE IMAP4 server terminating connection
xx OK LOGOUT completed
[32m##########7 Check autoreplied messaege successfully!![0m
########## 8 Clear mta.log  ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Thu Nov 16 00:12:05 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ ##########9 delieber 1 message from user1 to user2 ...
[32m########## 9 Message Deliver successfully, we can continue now[0m
########## 10 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Thu Nov 16 00:12:21 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171116 001222582-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;SmtpConnectionReceived(70/1) [10.37.2.214]:fromhost=10.37.2.214:fromport=59332:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001E.0
20171116 001225894-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;MsgTrace(65/26) received from internet:from=<ar28884@whsasf.com>:msgid=<20171116051225.AAZ10719.mx-10-49-58-118.openwave.com@whsasf.com>:fromhost=[10.37.2.214]:fromport=59332:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001E.1:msgsize=439:time=1:sender=<ar28884@whsasf.com>:rcpts=<ar247@openwave.com>:protocol=ESMTP:encoding=plaintext:auth=
20171116 001225894-0500 mx-10-49-58-118 mta 10719 11340 139831883622144 Note;MsgTrace(65/26) docid will be used for message-id:user=ar247@openwave.com:from=<ar28884@whsasf.com>:msgid=<20171116051225.AAZ10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:fromhost=10.37.2.214:fromport=59332:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001E.1
20171116 001225938-0500 mx-10-49-58-118 mta 10719 11343 139831883089664 Note;MsgTrace(65/26) delivered:user=ar247@openwave.com:mbox=8023775972459741015:mss=mx-10-49-58-118:from=<ar28884@whsasf.com>:msgid=<20171116051225.AAZ10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=581:port=55014:fromhost=10.37.2.214:fromport=59332:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001E.1:docid=bc2603a2-ca8c-11e7-bcf1-d5c2beeca721:node=mx-10-49-58-118:nodePort=55014
20171116 001225944-0500 mx-10-49-58-118 mta 10719 11343 139831883089664 Note;MtaAutoReplySuppressedAlreadySent(79/60) user=ar247@openwave.com:mbox=8023775972459741015:mss=mx-10-49-58-118:from=<ar28884@whsasf.com>:msgid=<20171116051225.AAZ10719.mx-10-49-58-118.openwave.com@whsasf.com>:size=546:port=55014:fromhost=10.37.2.214:fromport=59332:localAddr=[10.49.58.118]:sid=7DCB3FF7-A957BDFE-0000001E.1:node=mx-10-49-58-118:nodePort=55014
20171116 001226174-0500 mx-10-49-58-118 mta 10719 11335 139831900456704 Note;SmtpConnectionClosed(70/2) [10.37.2.214]:4:1:194:fromhost=[10.37.2.214]:fromport=59332:localAddr=10.49.58.118:sid=7DCB3FF7-A957BDFE-0000001E.1
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########10 Autoreply messaeg undelievered successfully!![0m
TESTPASSED: /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10235/: AutoReply in vacation mode with message delievered between start/stop date for external sender test success! (136 sec.)
##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
PASSED: /home/ram/workspace/bohem/Automation/single-message/Deliever-message-between-AutoReplyStart-and-StopDate-when-both-sets/external-domain/mx-10235/ [20171116-131241] (141 sec.) 29
Test ended: Thu Nov 16 13:15:02 CST 2017

