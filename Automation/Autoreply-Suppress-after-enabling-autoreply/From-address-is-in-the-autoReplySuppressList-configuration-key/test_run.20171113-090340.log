	**********  Starting /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key  **********
Test started: Mon Nov 13 09:03:40 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 20:00:05 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ rm: cannot remove 'imapfetch*.log': No such file or directory
rm: cannot remove 'send*.log': No such file or directory
########## 2 Accounts provision ...
8319512164783750642
4848195104239131770
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 20:01:24 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ imconfcontrol -install -key "/*/mta/autoReplySuppressList=autoanswer
> echo
> listserv
> mailerdaemon
> mailer-daemon
> mirror
> netserv
> server
> uucp
> mailer
> listproc
> majordomo
> list.manager
> ar15935" 
Reporting: appsuite on * server reported: 
Reporting: imapserv:imconfserv:imdircacheserv:imdirserv:imextserv:immgrserv:imqueueserv:mss.1:mta:popserv on mx-10-49-58-118 server reported: 
autoReplySuppressList: mta on mx-10-49-58-118 will be trivially accommodated: 
Reporting: immgrserv:mss.1 on mx-10-49-58-119 server reported: 
Reporting: immgrserv:mxos on mx-10-49-58-120 server reported: 
mx-10-49-58-118:imail2:Mx9.5:~$ imconfget -fullpath /*/mta/autoReplySuppressList
autoanswer
echo
listserv
mailerdaemon
mailer-daemon
mirror
netserv
server
uucp
mailer
listproc
majordomo
list.manager
ar15935
mx-10-49-58-118:imail2:Mx9.5:~$ key settings correctly, we can continue now
spawn ssh root@10.49.58.118
Password: 
Last login: Sun Nov 12 19:27:33 2017 from bigchina
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1510534912
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 4 Configure user2 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 20:01:47 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar12383@openwave.com reply data.txt 1510534917 1510536712
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########4 Congifuration successfully[0m
##########5 delieber 1 message from user1 to user2 ...
[32m########## 5 Message Deliver successfully, we can continue now[0m
########## 6 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Sun Nov 12 20:02:13 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171112 200148266-0500 mx-10-49-58-118 mta 26417 26473 139676430161664 Note;ConfStartUpdate(51/26) assessment:Sun Nov 12 20\3a00\3a06 EST 2017:Sun Nov 12 20\3a01\3a48 EST 2017
20171112 200148291-0500 mx-10-49-58-118 mta 26417 26473 139676430161664 Note;ConfParmChanged(51/27) autoReplySuppressList:mx-10-49-58-118:mta:autoanswer\necho\nlistserv\nmailerdaemon\nmailer-daemon\nmirror\nnetserv\nserver\nuucp\nmailer\nlistproc\nmajordomo\nlist.manager\nar8596:autoanswer\necho\nlistserv\nmailerdaemon\nmailer-daemon\nmirror\nnetserv\nserver\nuucp\nmailer\nlistproc\nmajordomo\nlist.manager\nar15935:will be trivially accommodated
20171112 200148301-0500 mx-10-49-58-118 mta 26417 26473 139676430161664 Note;ConfEndUpdate(51/29) Sun Nov 12 20\3a00\3a06 EST 2017:Sun Nov 12 20\3a01\3a48 EST 2017:1
20171112 200148334-0500 mx-10-49-58-118 mta 26417 26473 139676430161664 Note;ConfStartUpdate(51/26) installation:Sun Nov 12 20\3a00\3a06 EST 2017:Sun Nov 12 20\3a01\3a48 EST 2017
20171112 200148334-0500 mx-10-49-58-118 mta 26417 26473 139676430161664 Note;ConfEndUpdate(51/29) Sun Nov 12 20\3a00\3a06 EST 2017:Sun Nov 12 20\3a01\3a48 EST 2017:1
20171112 200217393-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;SmtpConnectionReceived(70/1) [10.37.2.214]:fromhost=10.37.2.214:fromport=60894:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-0000001E.0
20171112 200217393-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Warn;SmtpAddressFixed(70/13) [10.37.2.214]:mail from\3aar15935:<ar15935>:fromhost=10.37.2.214:fromport=60894:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-0000001E.1
20171112 200217668-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Warn;SmtpAddressFixed(70/13) [10.37.2.214]:rcpt to\3aar12383:<ar12383>:from=<ar15935>:fromhost=10.37.2.214:fromport=60894:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-0000001E.1
20171112 200217688-0500 mx-10-49-58-118 mta 26417 27838 139676408801024 Note;MsgTrace(65/26) docid will be used for message-id:user=ar12383@openwave.com:from=<ar15935@openwave.com>:msgid=<20171113010217.AAW26417.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=477:fromhost=10.37.2.214:fromport=60894:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-0000001E.1
20171112 200217689-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;MsgTrace(65/26) received from internet:from=<ar15935>:msgid=<20171113010217.AAW26417.mx-10-49-58-118.openwave.com@[10.37.2.214]>:fromhost=[10.37.2.214]:fromport=60894:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-0000001E.1:msgsize=365:time=0:sender=<ar15935>:rcpts=<ar12383@openwave.com>:protocol=SMTP:encoding=plaintext:auth=
20171112 200217689-0500 mx-10-49-58-118 mta 26417 27466 139676413593344 Note;SmtpConnectionClosed(70/2) [10.37.2.214]:0:1:102:fromhost=[10.37.2.214]:fromport=60894:localAddr=10.49.58.118:sid=57FAE7E5-8E748501-0000001E.1
20171112 200217736-0500 mx-10-49-58-118 mta 26417 27482 139676409865984 Note;MsgTrace(65/26) delivered:user=ar12383@openwave.com:mbox=4848195104239131770:mss=mx-10-49-58-119:from=<ar15935@openwave.com>:msgid=<20171113010217.AAW26417.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=514:port=55014:fromhost=10.37.2.214:fromport=60894:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-0000001E.1:docid=4b5269fc-c80e-11e7-830e-20b6ec528fa3:node=mx-10-49-58-119:nodePort=55014
20171112 200217737-0500 mx-10-49-58-118 mta 26417 27482 139676409865984 Note;MtaAutoReplySuppressedSender(79/58) user=ar12383@openwave.com:mbox=4848195104239131770:mss=mx-10-49-58-119:from=<ar15935@openwave.com>:msgid=<20171113010217.AAW26417.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=477:port=55014:fromhost=10.37.2.214:fromport=60894:localAddr=[10.49.58.118]:sid=57FAE7E5-8E748501-0000001E.1:node=mx-10-49-58-119:nodePort=55014
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########6 Autoreply messaeg undelievered successfully!![0m
########## 7 check autoreplied message in inbox of user1 ...
imapmail: host[10.49.58.118] port[20143] user[ar15935] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 1 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1510534885] UIDs valid
* OK [UIDNEXT 1001] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 0 RECENT
xx OK [READ-WRITE] SELECT completed
xx NO FETCH failed
Didn't get OK for FETCH
Not Connected...
[32m##########7 Check autoreplied messaege successfully!![0m
TESTPASSED: /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key: AutoReply in reply mode with message undelievered between start/stop date for internal sender test success! (64 sec.)
##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
PASSED: /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key [20171113-090340] (67 sec.)
Test ended: Mon Nov 13 09:04:47 CST 2017

