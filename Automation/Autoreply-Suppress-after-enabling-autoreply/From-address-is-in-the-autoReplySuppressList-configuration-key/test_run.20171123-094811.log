	**********  Starting /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key  **********
Test started: Thu Nov 23 09:48:11 CST 2017
########## 1 Clear mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 20:40:19 2017
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ > ~/log/mta.log
mx-10-49-58-118:imail2:Mx9.5:~$ rm: cannot remove 'imapfetch*.log': No such file or directory
rm: cannot remove 'send*.log': No such file or directory
########## 2 Accounts provision ...
4857097206270029993
7929788321368390505
[32m########## 2 Accont provision successfully, we can continue now[0m
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 20:45:42 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ imconfcontrol -install -key "/*/mta/autoReplySuppressList=autoanswer
> echo
> listserv
> mailerdaemon
> mailer-daemon
> mirror
> netserv
> server
> uucp
> mailer
> listproc
> majordomo
> list.manager
> ar10401" 
Reporting: appsuite on * server reported: 
Reporting: imapserv:imconfserv:imdircacheserv:imdirserv:imextserv:immgrserv:imqueueserv:mss.1:mta:popserv on mx-10-49-58-118 server reported: 
autoReplySuppressList: mta on mx-10-49-58-118 will be trivially accommodated: 
Reporting: immgrserv:mss.1 on mx-10-49-58-119 server reported: 
Reporting: immgrserv:mxos on mx-10-49-58-120 server reported: 
mx-10-49-58-118:imail2:Mx9.5:~$ imconfget -fullpath /*/mta/autoReplySuppressList
autoanswer
echo
listserv
mailerdaemon
mailer-daemon
mirror
netserv
server
uucp
mailer
listproc
majordomo
list.manager
ar10401
mx-10-49-58-118:imail2:Mx9.5:~$ key settings correctly, we can continue now
spawn ssh root@10.49.58.118
Last login: Wed Nov 22 20:37:14 2017 from bigchina
]0;root@mx-10-49-58-118:~[?1034h[root@mx-10-49-58-118 ~]# date +%s
1511401600
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# 
]0;root@mx-10-49-58-118:~[root@mx-10-49-58-118 ~]# ########## 4 Configure user2 to vacation autoreply mode using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 20:45:48 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ echo 'internal:' >data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an autoreply message for internal senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'external:' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ echo 'Reply,This is an external autoreply message for external senders!' >>data.txt
mx-10-49-58-118:imail2:Mx9.5:~$ autoreplyctrl ar32244@openwave.com reply data.txt 1511401605 1511403400
AutoReply data updated Successfully.
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########4 Congifuration successfully[0m
##########5 delieber 1 message from user1 to user2 ...
[32m########## 5 Message Deliver successfully, we can continue now[0m
########## 6 Check mta.log using expect tool ...
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 20:46:49 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ cat log/mta.log
20171122 204548795-0500 mx-10-49-58-118 mta 705 761 140708082865920 Note;ConfStartUpdate(51/26) assessment:Mon Nov 20 19\3a13\3a01 EST 2017:Wed Nov 22 20\3a45\3a48 EST 2017
20171122 204548805-0500 mx-10-49-58-118 mta 705 761 140708082865920 Note;ConfParmChanged(51/27) autoReplySuppressList:mx-10-49-58-118:mta:autoanswer\necho\nlistserv\nmailerdaemon\nmailer-daemon\nmirror\nnetserv\nserver\nuucp\nmailer\nlistproc\nmajordomo\nlist.manager:autoanswer\necho\nlistserv\nmailerdaemon\nmailer-daemon\nmirror\nnetserv\nserver\nuucp\nmailer\nlistproc\nmajordomo\nlist.manager\nar10401:will be trivially accommodated
20171122 204548820-0500 mx-10-49-58-118 mta 705 761 140708082865920 Note;ConfEndUpdate(51/29) Mon Nov 20 19\3a13\3a01 EST 2017:Wed Nov 22 20\3a45\3a48 EST 2017:1
20171122 204548846-0500 mx-10-49-58-118 mta 705 761 140708082865920 Note;ConfStartUpdate(51/26) installation:Mon Nov 20 19\3a13\3a01 EST 2017:Wed Nov 22 20\3a45\3a48 EST 2017
20171122 204548846-0500 mx-10-49-58-118 mta 705 761 140708082865920 Note;ConfEndUpdate(51/29) Mon Nov 20 19\3a13\3a01 EST 2017:Wed Nov 22 20\3a45\3a48 EST 2017:1
20171122 204654109-0500 mx-10-49-58-118 mta 705 2108 140708081534720 Note;SmtpConnectionReceived(70/1) [10.37.2.214]:fromhost=10.37.2.214:fromport=45330:localAddr=10.49.58.118:sid=CA9C6B9D-407289FA-00000002.0
20171122 204654110-0500 mx-10-49-58-118 mta 705 2108 140708081534720 Warn;SmtpAddressFixed(70/13) [10.37.2.214]:mail from\3aar10401:<ar10401>:fromhost=10.37.2.214:fromport=45330:localAddr=10.49.58.118:sid=CA9C6B9D-407289FA-00000002.1
20171122 204654350-0500 mx-10-49-58-118 mta 705 2108 140708081534720 Warn;SmtpAddressFixed(70/13) [10.37.2.214]:rcpt to\3aar32244:<ar32244>:from=<ar10401>:fromhost=10.37.2.214:fromport=45330:localAddr=10.49.58.118:sid=CA9C6B9D-407289FA-00000002.1
20171122 204654380-0500 mx-10-49-58-118 mta 705 2108 140708081534720 Note;MsgTrace(65/26) received from internet:from=<ar10401>:msgid=<20171123014654.AAA705.mx-10-49-58-118.openwave.com@[10.37.2.214]>:fromhost=[10.37.2.214]:fromport=45330:localAddr=10.49.58.118:sid=CA9C6B9D-407289FA-00000002.1:msgsize=363:time=0:sender=<ar10401>:rcpts=<ar32244@openwave.com>:protocol=SMTP:encoding=plaintext:auth=
20171122 204654381-0500 mx-10-49-58-118 mta 705 2108 140708081534720 Note;SmtpConnectionClosed(70/2) [10.37.2.214]:0:1:102:fromhost=[10.37.2.214]:fromport=45330:localAddr=10.49.58.118:sid=CA9C6B9D-407289FA-00000002.1
20171122 204654381-0500 mx-10-49-58-118 mta 705 2110 140708064700160 Note;MsgTrace(65/26) docid will be used for message-id:user=ar32244@openwave.com:from=<ar10401@openwave.com>:msgid=<20171123014654.AAA705.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=473:fromhost=10.37.2.214:fromport=45330:localAddr=[10.49.58.118]:sid=CA9C6B9D-407289FA-00000002.1
20171122 204654451-0500 mx-10-49-58-118 mta 705 2115 140708063901440 Note;MsgTrace(65/26) delivered:user=ar32244@openwave.com:mbox=7929788321368390505:mss=mx-10-49-58-118:from=<ar10401@openwave.com>:msgid=<20171123014654.AAA705.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=473:port=55014:fromhost=10.37.2.214:fromport=45330:localAddr=[10.49.58.118]:sid=CA9C6B9D-407289FA-00000002.1:docid=2ee26904-cff0-11e7-93f2-80a1239b79e5:node=mx-10-49-58-118:nodePort=55014
20171122 204654452-0500 mx-10-49-58-118 mta 705 2114 140708064167680 Note;MtaAutoReplySuppressedSender(79/58) user=ar32244@openwave.com:mbox=7929788321368390505:mss=mx-10-49-58-119:from=<ar10401@openwave.com>:msgid=<20171123014654.AAA705.mx-10-49-58-118.openwave.com@[10.37.2.214]>:size=473:port=55014:fromhost=10.37.2.214:fromport=45330:localAddr=[10.49.58.118]:sid=CA9C6B9D-407289FA-00000002.1:node=mx-10-49-58-119:nodePort=55014
mx-10-49-58-118:imail2:Mx9.5:~$ [32m##########6 Autoreply messaeg undelievered successfully!![0m
########## 7 check autoreplied message in inbox of user1 ...
imapmail: host[10.49.58.118] port[20143] user[ar10401] pass[p] folder[inbox] message[2]
xx OK LOGIN completed
* 1 EXISTS
* OK [UNSEEN 1] First unseen message
* OK [UIDVALIDITY 1511401543] UIDs valid
* OK [UIDNEXT 1001] Predicted next UID
* FLAGS (\Answered \Flagged \Deleted \Draft \Seen)
* OK [PERMANENTFLAGS (\* \Answered \Flagged \Deleted \Draft \Seen)] Permanent flags
* 0 RECENT
xx OK [READ-WRITE] SELECT completed
xx NO FETCH failed
Didn't get OK for FETCH
Not Connected...
[32m##########7 Check autoreplied messaege successfully!![0m
TESTPASSED: /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key: AutoReply in reply mode with message undelievered between start/stop date for internal sender test success! (86 sec.)
spawn ssh imail2@10.49.58.118
Password: 
Last login: Wed Nov 22 20:46:57 2017 from bigchina
[?1034hmx-10-49-58-118:imail2:Mx9.5:~$ imconfcontrol -install -key "/*/mta/autoReplySuppressList=autoanswer
> echo
> listserv
> mailerdaemon
> mailer-daemon
> mirror
> netserv
> server
> uucp
> mailer
> listproc
> majordomo
> list.manager"
Reporting: appsuite on * server reported: 
Reporting: imapserv:imconfserv:imdircacheserv:imdirserv:imextserv:immgrserv:imqueueserv:mss.1:mta:popserv on mx-10-49-58-118 server reported: 
autoReplySuppressList: mta on mx-10-49-58-118 will be trivially accommodated: 
Reporting: immgrserv:mss.1 on mx-10-49-58-119 server reported: 
Reporting: immgrserv:mxos on mx-10-49-58-120 server reported: 
mx-10-49-58-118:imail2:Mx9.5:~$ ##########  doing some clear job ...
[32m##########  Accont deleted successfully[0m
PASSED: /home/ram/workspace/bohem/Automation/Autoreply-Suppress-after-enabling-autoreply/From-address-is-in-the-autoReplySuppressList-configuration-key [20171123-094811] (117 sec.)
Test ended: Thu Nov 23 09:50:08 CST 2017

