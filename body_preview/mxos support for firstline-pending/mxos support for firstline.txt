(1)mOS: Client performs GET of message metadata (single message)
Similar to IMAP FETCH, FirstLine can be fetched using mOS get message metadata.
GET http://mxosHost:mxosPort/mxos/mailbox/v2/{email}/folders/{folderName}/messages/{messageId}


ram@ubuntu:~$ curl -s -X GET http://172.26.203.123:8081/mxos/mailbox/v2/xx1@openwave.com/folders/INBOX/messages/14149990-f737-11e6-a432-992a8237a3ad |jq .
{
  "metadata": {
    "uid": 3079,
    "type": "",
    "priority": "3",
    "flagRecent": false,
    "flagSeen": false,
    "flagUnread": true,
    "flagAns": false,
    "flagFlagged": false,
    "flagDel": false,
    "flagBounce": false,
    "flagPriv": false,
    "flagRichMail": 0,
    "flagDraft": false,
    "popDeletedFlag": "false",
    "keywords": [],
    "references": "",
    "hasAttachments": false,
    "deliverNDR": 0,
    "sentDate": 1487572661,
    "arrivalTime": 1487572661,
    "lastAccessedTime": 1487577768,
    "expireOn": 0,
    "size": 481,
    "threadId": "",
    "from": "<xx2@openwave.com>",
    "to": [
      ""
    ],
    "cc": [
      ""
    ],
    "bcc": [],
    "replyTo": [],
    "inReplyTo": "",
    "blobMessageId": "<20170220063734.BMM23163.mx-172-26-202-87.openwave.com@[10.37.2.214]>",
    "oldMsgId": "",
    "subject": ""
  },
  "header": {
    "headerBlob": "Return-Path: <xx2@openwave.com>\r\nReceived: from [10.37.2.214] by mx-172-26-202-87.openwave.com\r\n          (InterMail vM.9.05.00.00 201-2473-137-108) with SMTP\r\n          id <20170220063734.BMM23163.mx-172-26-202-87.openwave.com@[10.37.2.214]>\r\n          for <xx1@openwave.com>; Sun, 19 Feb 2017 22:37:34 -0800\r\nDate: Sun, 19 Feb 2017 22:37:41 -0800\r\nMessage-Id: <20170220063734.BMM23163.mx-172-26-202-87.openwave.com@[10.37.2.214]>\r\nFrom: <xx2@openwave.com>\r\n\r\n"
  },
  "body": {
    "messageBlob": "UmV0dXJuLVBhdGg6IDx4eDJAb3BlbndhdmUuY29tPg0KUmVjZWl2ZWQ6IGZyb20gWzEwLjM3LjIuMjE0XSBieSBteC0xNzItMjYtMjAyLTg3Lm9wZW53YXZlLmNvbQ0KICAgICAgICAgIChJbnRlck1haWwgdk0uOS4wNS4wMC4wMCAyMDEtMjQ3My0xMzctMTA4KSB3aXRoIFNNVFANCiAgICAgICAgICBpZCA8MjAxNzAyMjAwNjM3MzQuQk1NMjMxNjMubXgtMTcyLTI2LTIwMi04Ny5vcGVud2F2ZS5jb21AWzEwLjM3LjIuMjE0XT4NCiAgICAgICAgICBmb3IgPHh4MUBvcGVud2F2ZS5jb20+OyBTdW4sIDE5IEZlYiAyMDE3IDIyOjM3OjM0IC0wODAwDQpEYXRlOiBTdW4sIDE5IEZlYiAyMDE3IDIyOjM3OjQxIC0wODAwDQpNZXNzYWdlLUlkOiA8MjAxNzAyMjAwNjM3MzQuQk1NMjMxNjMubXgtMTcyLTI2LTIwMi04Ny5vcGVud2F2ZS5jb21AWzEwLjM3LjIuMjE0XT4NCkZyb206IDx4eDJAb3BlbndhdmUuY29tPg0KDQpoaSB4eDEudGhpcyBpcyB4eDINCg=="
  }
}









(2)mOS: Client performs GET of message metadata (all messages in folder)
Similar to IMAP FETCH, FirstLine can be fetched using mOS get all folder metadata.

GET http://mxosHost:mxosPort/mxos/mailbox/v2/{email}/folders/list



ram@ubuntu:~$ curl -s -X GET http://172.26.203.123:8081/mxos/mailbox/v2/xx1@openwave.com/folders/list  |jq .[
  {
    "folderId": "919c540c-f435-11e6-adce-83c33901ebc9",
    "folderName": "/my1/xx4",
    "nextUID": 1000,
    "uidValidity": 1487242159,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "7cdc23d0-f435-11e6-ac0e-b72344bd97dc",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "e1280902-f32d-11e6-b938-6b782020d67e",
    "folderName": "/INBOX",
    "nextUID": 3080,
    "uidValidity": 1487128905,
    "numMessages": 3,
    "numReadMessages": 1,
    "numUnreadMessages": 2,
    "folderSizeBytes": 1900,
    "folderSizeReadBytes": 940,
    "folderSizeUnreadBytes": 960,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "e12809a2-f32d-11e6-ad8f-9b45c253dabc",
    "folderName": "/SentMail",
    "nextUID": 1000,
    "uidValidity": 1487128905,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "e12809d4-f32d-11e6-87d1-f4ae28285bbd",
    "folderName": "/Drafts",
    "nextUID": 1000,
    "uidValidity": 1487128905,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "e1280a06-f32d-11e6-9296-e63dccb35775",
    "folderName": "/Spam",
    "nextUID": 1000,
    "uidValidity": 1487128905,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "e1280a2e-f32d-11e6-bdbe-c58aad4edc72",
    "folderName": "/Trash",
    "nextUID": 1000,
    "uidValidity": 1487128905,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "38ee3c9e-f435-11e6-a3de-998252d3d42a",
    "folderName": "/testfolder/xxx",
    "nextUID": 1000,
    "uidValidity": 1487242010,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "59e81d92-f431-11e6-93e0-5c24b9beac48",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "59e81d92-f431-11e6-93e0-5c24b9beac48",
    "folderName": "/testfolder",
    "nextUID": 1001,
    "uidValidity": 1487240348,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  },
  {
    "folderId": "7cdc23d0-f435-11e6-ac0e-b72344bd97dc",
    "folderName": "/my1",
    "nextUID": 1000,
    "uidValidity": 1487242124,
    "numMessages": 0,
    "numReadMessages": 0,
    "numUnreadMessages": 0,
    "folderSizeBytes": 0,
    "folderSizeReadBytes": 0,
    "folderSizeUnreadBytes": 0,
    "parentFolderId": "00000000-0000-1000-0000-000000000000",
    "folderSubscribed": "true",
    "keywords": ""
  }
]


(3)mOS Client performs GET of message metadata (search)
Similar to IMAP FETCH, FirstLine can be fetched using mOS search metadata.

GET http://mxosHost:mxosPort/mxos/mailbox/v2/{email}/folders/{folderName} /messages/metadata/search?sortKey=messageId&query=<Query String>




ram@ubuntu:~$ curl -s -X GET "http://172.26.203.123:8081/mxos/mailbox/v2/xx1@openwave.com/folders/INBOX/messages/metadata/search?sortKey=messageId&query=*"| jq .
{
  "0": {
    "3eda427a-f66e-11e6-9d9f-300037740e00": {
      "uid": 3077,
      "type": "",
      "priority": "3",
      "flagRecent": false,
      "flagSeen": true,
      "flagUnread": false,
      "flagAns": false,
      "flagFlagged": false,
      "flagDel": false,
      "flagBounce": false,
      "flagPriv": false,
      "flagRichMail": 0,
      "flagDraft": false,
      "popDeletedFlag": "false",
      "keywords": [],
      "references": "",
      "hasAttachments": false,
      "deliverNDR": 0,
      "sentDate": 1487486048,
      "arrivalTime": 1487486404,
      "lastAccessedTime": 1487554577,
      "expireOn": 0,
      "size": 940,
      "threadId": "",
      "from": "xx2 <xx2@openwave.com>",
      "to": [
        "xx1@openwave.com"
      ],
      "cc": [
        ""
      ],
      "bcc": [],
      "replyTo": [],
      "inReplyTo": "",
      "blobMessageId": "<f6e12b5f-1716-faf2-8dc2-e94549898623@openwave.com>",
      "oldMsgId": "",
      "subject": "ZW1wdHkgbWVzc2FnZSBib2R5IGVtYWls"
    }
  },
  "1": {
    "ddcb722e-f735-11e6-b483-81d5be09a67c": {
      "uid": 3078,
      "type": "",
      "priority": "3",
      "flagRecent": false,
      "flagSeen": false,
      "flagUnread": true,
      "flagAns": false,
      "flagFlagged": false,
      "flagDel": false,
      "flagBounce": false,
      "flagPriv": false,
      "flagRichMail": 0,
      "flagDraft": false,
      "popDeletedFlag": "false",
      "keywords": [],
      "references": "",
      "hasAttachments": false,
      "deliverNDR": 0,
      "sentDate": 1487572140,
      "arrivalTime": 1487572140,
      "lastAccessedTime": 1487572454,
      "expireOn": 0,
      "size": 479,
      "threadId": "",
      "from": "<xx2@openwave.com>",
      "to": [
        ""
      ],
      "cc": [
        ""
      ],
      "bcc": [],
      "replyTo": [],
      "inReplyTo": "",
      "blobMessageId": "<20170220062854.BMB23163.mx-172-26-202-87.openwave.com@[10.37.2.214]>",
      "oldMsgId": "",
      "subject": ""
    }
  },
  "2": {
    "14149990-f737-11e6-a432-992a8237a3ad": {
      "uid": 3079,
      "type": "",
      "priority": "3",
      "flagRecent": false,
      "flagSeen": false,
      "flagUnread": true,
      "flagAns": false,
      "flagFlagged": false,
      "flagDel": false,
      "flagBounce": false,
      "flagPriv": false,
      "flagRichMail": 0,
      "flagDraft": false,
      "popDeletedFlag": "false",
      "keywords": [],
      "references": "",
      "hasAttachments": false,
      "deliverNDR": 0,
      "sentDate": 1487572661,
      "arrivalTime": 1487572661,
      "lastAccessedTime": 1487577768,
      "expireOn": 0,
      "size": 481,
      "threadId": "",
      "from": "<xx2@openwave.com>",
      "to": [
        ""
      ],
      "cc": [
        ""
      ],
      "bcc": [],
      "replyTo": [],
      "inReplyTo": "",
      "blobMessageId": "<20170220063734.BMM23163.mx-172-26-202-87.openwave.com@[10.37.2.214]>",
      "oldMsgId": "",
      "subject": ""
    }
  }
}



